"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _assign=require("lodash/assign"),_assign2=_interopRequireDefault(_assign),_each=require("lodash/each"),_each2=_interopRequireDefault(_each),_get=require("lodash/get"),_get2=_interopRequireDefault(_get),_has=require("lodash/has"),_has2=_interopRequireDefault(_has),_pull=require("lodash/pull"),_pull2=_interopRequireDefault(_pull),_set=require("lodash/set"),_set2=_interopRequireDefault(_set),_startsWith=require("lodash/startsWith"),_startsWith2=_interopRequireDefault(_startsWith),_unset=require("lodash/unset"),_unset2=_interopRequireDefault(_unset);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}class StoreClass{constructor(){this.state={},this.watchers={}}getField(a){return(0,_get2.default)(this.state,a)}set(a){(0,_assign2.default)(this.state,a),(0,_each2.default)(this.watchers,(b,c)=>{(0,_has2.default)(a,c)&&(0,_each2.default)(b,(a)=>{a(this.getField(c))})})}setField(a,b){(0,_set2.default)(this.state,a,b),(0,_each2.default)(this.watchers,(b,c)=>{(0,_startsWith2.default)(a,c)&&(0,_each2.default)(b,(a)=>{a(this.getField(c))})})}watch(a,b){return"undefined"==typeof this.watchers[a]?this.watchers[a]=[b]:this.watchers[a].push(b),()=>{(0,_pull2.default)(this.watchers[a],b),1>this.watchers[a].length&&(0,_unset2.default)(this.watchers,a)}}}exports.default=StoreClass;